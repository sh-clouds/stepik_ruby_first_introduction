Итераторы

Как мы уже видели в предыдущих уроках, для прохода по всем элементам массива или хэша можно использовать циклы. Однако в Ruby есть и более элегантные методы циклической обработки, которые называются итераторы.

Итераторы, так же как и циклы, позволяют многократно выполнять набор выражений (команд). Но, в отличие от while, until и for, итераторы это не ключевые слова, а методы.

Итератор each является одним из наиболее часто используемых. Взгляните на пример его использования:

arr = [1, 5, 8, 12]

arr.each do |x|
  puts x
end

# выведет:
# 1
# 5
# 8
# 12

                  
Сначала синтаксис может показаться запутанным, но нужно просто запомнить символы вертикальной черты с обеих сторон переменной. Каждый итератор циклически проходит через все элементы массива и при каждой итерации присваивает соответствующий элемент массива переменной внутри вертикальных черт. Эта переменная называется параметром блока.

Мы можем, например, вычислить сумму всех элементов массива:

arr = [1, 5, 8, 12]
sum = 0
arr.each do |x|
  sum += x
end

puts sum # выведет: 26