Класс Struct

В некоторых случаях нет необходимости определять полноценный класс. Однако нам может понадобится группа атрибутов, связанных между собой (например, определение книг, для которых нужно указать год издания и количество страниц).

Для этого мы могли бы создать отдельный класс со всеми необходимыми переменными и методами экземпляров, но в Ruby есть возможность связать ряд атрибутов в набор (коллекцию) используя встроенный класс Struct.

Например, мы можем создать такой класс:

class Book

  attr_accessor :year, :pages

  def initialize(year, pages)
    @year = year
    @pages = pages
  end
end

berserker = Book.new(1995, 326)
# пример создания точки

                  
Но это достаточно громоздко, поэтому как альтернативу в такой ситуации можно использовать как раз класс Struct. Например:

Book = Struct.new(:year, :pages)

                  
В коде выше Book это экземпляр Struct, который имеет два атрибута year и pages. Struct автоматически создает для них метод initialize и методы доступа, поэтому теперь мы можем использовать Book точно так же, как и класс, создавая на его основе объекты:

Book = Struct.new(:year, :pages)
berserker = Book.new(1995, 326)
rembo = Book.new(1981, 218)

rembo.year = 1979
puts rembo.year 
# выведет: 1979

                  
Следует отметить, что мы не сможем расширять список атрибутов уже существующего объекта Book:

rembo.author = "Дэвид Моррелл"
# вызовет ошибку