Истинная сила примесей проявляется, когда код в примеси начинает взаимодействовать с кодом в классе, который его использует. У Ruby есть ряд готовых к использованию предопределенных примесей.

Возьмем в качестве примера стандартную примесь Comparable. Примесь Comparable может быть использована для добавления в класс операторов сравнения (<, <=, ==, >= и >).

Чтобы это сработало, Comparable предполагает, что любой класс, который его использует, определяет оператор <=>. Таким образом, как автор класса вы определяете один метод, <=>, подмешиваете Comparable и получаете в результате шесть методов сравнения!

Попробуем это сделать с классом Human, создав возможность сравнивать людей по их возрасту.

Достаточно включить модуль Comparable и реализовать оператор сравнения <=>:

class Human
  attr_accessor :name, :age
  include Comparable
  def initialize(name, age)
    self.name = name
    self.age = age
  end
  def <=>(other)
    self.age <=> other.age
  end
end

h1 = Human.new("Павел", 55)
h2 = Human.new("Михаил", 42)

puts h1 < h2 # false

                  
Модуль Comparable позволяет легко добавлять к классам операторы сравнения, основанные на любой пользовательской логике.